{
  "Modules": {

    "ObjectDetectionYOLOv5Net": {
      "Name": "Object Detection (YOLOv5 .NET)",
      "Version": "1.8.0",

      // Publishing info
      "Description": "Provides Object Detection using YOLOv5 ONNX models with DirectML. This module is best for those on Windows and Linux without CUDA enabled GPUs", 
      "Category": "Computer Vision",
      "Platforms": [ "all" ],
      "License": "MIT",
      "LicenseUrl": "https://opensource.org/licenses/MIT",
      "Author": "Matthew Dennis",
      "Homepage": "https://codeproject.com/ai",
      "BasedOn": "yolov5-net",
      "BasedOnUrl": "https://github.com/techwingslab/yolov5-net",

      // Launch instructions
      "AutoStart": false,
      "FilePath": "bin/ObjectDetectionYOLOv5Net.dll",  // The default for Linux / macOS
      "Runtime": "dotnet",
      "RuntimeLocation": "Shared",      // Can be Local or Shared. .NET so moot point here
      "PostStartPauseSecs": 1,          // Generally 1 if using GPU, 0 for CPU
      "Queue": "objectdetection_queue", // We make all Object detectors use the same queue.

      "EnvironmentVariables": {
        "MODEL_SIZE": "MEDIUM",
        "MODELS_DIR": "%CURRENT_MODULE_PATH%\\assets",
        "CUSTOM_MODELS_DIR": "%CURRENT_MODULE_PATH%\\custom-models"
      },

      // GPU Options
      "InstallGPU": true,
      "EnableGPU": true,              // Will be coerced to false if InstallGPU = false
      "AcceleratorDeviceName": null,  // = default
      "Parallelism": 0,               // 0 = Default (number of CPUs - 1)
      "HalfPrecision": "enable",      // 'Force', 'Enable', 'Disable': whether to force on, allow, or disable half-precision ops

      // Which server version is compatible with each version of this module.
      "ModuleReleases": [
        { "ModuleVersion": "1.0",   "ServerVersionRange": [ "1.0",    "2.0.8" ], "ReleaseDate": "2022-06-01" },
        { "ModuleVersion": "1.1",   "ServerVersionRange": [ "2.1.0",  "2.1.0" ], "ReleaseDate": "2023-03-20", "ReleaseNotes": "Updated for CodeProject.AI Server 2.1" },
        { "ModuleVersion": "1.2",   "ServerVersionRange": [ "2.1.0",  "2.1.6" ], "ReleaseDate": "2023-04-09", "ReleaseNotes": "Corrected installer issues" },
        { "ModuleVersion": "1.3",   "ServerVersionRange": [ "2.1.0",  "2.1.6" ], "ReleaseDate": "2023-04-20", "ReleaseNotes": "Corrected module launch command" },
        { "ModuleVersion": "1.4",   "ServerVersionRange": [ "2.1.8",  "2.1.8" ], "ReleaseDate": "2023-04-20", "ReleaseNotes": "Minor changes in module setup" },
        { "ModuleVersion": "1.5",   "ServerVersionRange": [ "2.1.10", "2.2.4" ], "ReleaseDate": "2023-05-04", "ReleaseNotes": "Updated module settings", "Importance": "Minor" },
        { "ModuleVersion": "1.6",   "ServerVersionRange": [ "2.1.10", "2.2.4" ], "ReleaseDate": "2023-09-09", "ReleaseNotes": "Installer fix for Linux" },
        { "ModuleVersion": "1.7",   "ServerVersionRange": [ "2.3.0",  "2.3.0" ], "ReleaseDate": "2023-10-01", "ReleaseNotes": "Updated to match new installer SDK." },
        { "ModuleVersion": "1.7.1", "ServerVersionRange": [ "2.3.1",  "2.3.5" ], "ReleaseDate": "2023-10-10", "ReleaseNotes": "Updated to match new installer SDK." },
        { "ModuleVersion": "1.7.2", "ServerVersionRange": [ "2.4.0",  "2.4.0" ], "ReleaseDate": "2023-12-04", "ReleaseNotes": "Mesh support and a new module Id" },
        { "ModuleVersion": "1.7.3", "ServerVersionRange": [ "2.4.1",  "2.4.1" ], "ReleaseDate": "2023-12-06", "ReleaseNotes": "Updated modulesettings schema", "Importance": "Minor" },
        { "ModuleVersion": "1.7.4", "ServerVersionRange": [ "2.4.1",  "2.4.1" ], "ReleaseDate": "2023-12-07", "ReleaseNotes": "Updated modulesettings schema", "Importance": "Minor" },
        { "ModuleVersion": "1.7.5", "ServerVersionRange": [ "2.4.2", ""       ], "ReleaseDate": "2023-12-09", "ReleaseNotes": "Installer updates", "Importance": "Minor" },
        { "ModuleVersion": "1.7.6", "ServerVersionRange": [ "2.4.2", ""       ], "ReleaseDate": "2023-12-12", "ReleaseNotes": "Bug fixes"},
        { "ModuleVersion": "1.7.7", "ServerVersionRange": [ "2.4.2", ""       ], "ReleaseDate": "2023-12-21", "ReleaseNotes": "Installer fixes for macOS and Linux"},
        { "ModuleVersion": "1.8.0", "ServerVersionRange": [ "2.5.0", ""       ], "ReleaseDate": "2024-01-06", "ReleaseNotes": "Additions for dynamic explorer UI" }
      ],

      "RouteMaps": [
        {
          "Name": "Object Detection (YOLOv5 .NET)",
          "Route": "vision/detection",
          "Method": "POST",
          "Command": "detect",
          "Description": "The object detection module uses ML.NET and YOLO (You Only Look Once) to locate and classify the objects the models have been trained on. At this point there are 80 different types of objects that can be detected.",
          "Inputs": [
            {
              "Name": "image",
              "Type": "File",
              "Description": "The image to be analyzed."
            },
            {
              "Name": "min_confidence",
              "Type": "Float",
              "Description": "The minimum confidence level for an object will be detected. In the range 0.0 to 1.0.",
              "DefaultValue": 0.4,
              "MinValue": 0.0,
              "MaxValue": 1.0
            }
          ],
          "Outputs": [
            {
              "Name": "success",
              "Type": "Boolean",
              "Description": "True if successful."
            },
            {
              "Name": "message",
              "Type": "String",
              "Description": "A summary of the inference operation."
            },
            {
              "Name": "error",
              "Type": "String",
              "Description": "(Optional) An description of the error if success was false."
            },
            {
              "Name": "predictions",
              "Type": "Object",
              "Description": "An array of objects with the x_max, x_min, max, y_min, label and confidence."
            },
            {
              "Name": "count",
              "Type": "Integer",
              "Description": "The number of objects found."
            },
            {
              "Name": "inferenceMs",
              "Type": "Integer",
              "Description": "The time (ms) to perform the AI inference."
            },
            {
              "Name": "processMs",
              "Type": "Integer",
              "Description": "The time (ms) to process the image (includes inference and image manipulation operations)."
            }
          ]
        },

        {
          "Name": "Custom Object Detector (YOLOv5 .NET)",
          "Route": "vision/custom",
          "Method": "POST",
          "Command": "custom",
          "Description": "Detects objects based on YOLO PyTorch models. Models are stored as .pt files in the /ObjectDetectionYOLOv5Net/assets directory, and to make a call to a specific model use /vision/custom/model-name, where 'model-name' is the name of the model's .pt file",
          "Inputs": [
            {
              "Name": "image",
              "Type": "File",
              "Description": "The HTTP file object (image) to be analyzed."
            },
            {
              "Name": "min_confidence",
              "Type": "Float",
              "Description": "The minimum confidence level for an object will be detected. In the range 0.0 to 1.0. Default 0.4."
            }
          ],
          "Outputs": [
            {
              "Name": "success",
              "Type": "Boolean",
              "Description": "True if successful."
            },
            {
              "Name": "message",
              "Type": "String",
              "Description": "A summary of the inference operation."
            },
            {
              "Name": "error",
              "Type": "String",
              "Description": "(Optional) An description of the error if success was false."
            },
            {
              "Name": "predictions",
              "Type": "Object",
              "Description": "An array of objects with the x_max, x_min, max, y_min, label and confidence."
            },
            {
              "Name": "inferenceMs",
              "Type": "Integer",
              "Description": "The time (ms) to perform the AI inference."
            },
            {
              "Name": "processMs",
              "Type": "Integer",
              "Description": "The time (ms) to process the image (includes inference and image manipulation operations)."
            }
          ]
        },

        {
          "Name": "Object Detector List Custom Models (YOLOv5 .NET)",
          "Route": "vision/custom/list",
          "Method": "POST",
          "Command": "list-custom",
          "Description": "Returns a list of models available.",
          "Inputs": [],
          "Outputs": [
            {
              "Name": "success",
              "Type": "Boolean",
              "Description": "True if successful."
            },
            {
              "Name": "models",
              "Type": "String",
              "Description": "An array of strings containing the names of the models installed."
            }
          ]
        }
      ]
    }
  }
}

